# 1、如何选用GET 或POST?
从功能面上，可以用以下方式来决定该选用GET 或POST：

- GET 请求跟随在URL 之后的请求参数长度是有限的，过长的请求参数，如文件上传这类的大量数据，
就不适合用GET 请求，而应该改用POST请求。

- GET 请求的请求参数会出现在地址栏上，敏感性或有安全性考虑的请求参数(如信用卡号码、用户名、密码等)，就不应该使用GET 请求来发送。

- POST 请求的请求参数不会出现在地址栏上，所以无法加入浏览器的书签(Bookmark)之中，如果有些页面是根据请求参数来作不同的画面呈现(如论坛
的文章发表)，而你希望可以让用户设定书签，以便日后可以直接点击书签浏览，则应该使用GET 请求。

- 有些浏览器会依网址来缓存(Cache)数据，如果网址是相同的URL，则会直接从浏览器缓存中取出数据，而不会真正发送请求至服务器上查询最新的数据。
如果不希望服务器状态改变了，而浏览器仍从缓存中取得旧的资料，则可以改用POST 请求(使用GET 请求也可以避免缓存，例如在网址上附加时间戳，
让每次GET 请求的网址都不相同).

另外，还有另一个非功能面上的考虑，但其实也是 HTTP 当初在设计时区分GET与POST 的目的之一，就是按请求是否为等寡(idempotent)操作来决定使用GET 或POST.

## 1.1 幂等操作
所谓是否为幂等操作，就是请求的操作是否改变服务器状态，同一个操作重复多次，是否传回同样的结果。

- GET 请求应该用于幂等操作。GET 请求纯粹取得资源，而不改变服务器上的数据或状态。GET 的请求参数，只是用来告知服务器，必须进一步根据请求
参数(而不只是URL)来标识出要响应的内容(例如查询数据库的数据)，同样的GET 请求且使用相同的请求参数重复发送多次，都应该传回相同的结果。

- POST 请求应该用于非幂等(non-idempotent)操作. POST 请求发送的数据，可能会影响服务器上的数据或状态，例如修改(增、删、更新)数据库的内容，
或是在服务器上保存文件。你的请求若会改变服务器的状态，则应改用POST请求.

窗体发送可以通过`<form>`的method 属性来设定使用GET 或POST 方式来发送数据，通常若不设定method 属性，默认会使用GET。

# 2、有关URL 编码
HTTP 请求参数，必须使用请求参数名与请求参数值，中间以`=`表示成对关系。

如果请求参数值本身包括`"="`符号，或发送的请求参数值是URL，假设是GET 请求，则不能直接在地址栏上输入:
```
http://openhome.cc/addBookmar.do?url=http://openhome.cc
```
## 2.1 保留字符
在URI 的规范中定义了一些保留字符. 如：
```
“:”、“/“、"?"、"&"、"="、"@"、“%"
```
等字符，在URI 中都有它的作用。如果要在请求参数上表达url中的保留字符，必须在%字符之后以十六进制数值表示，来表示该字符的八个位数值。

例如：

`:` 字符真正储存时的八个位为 `0011 1010`. 用十六进制数值来表示则为3A.所以必须使用`%3A` 来表示`:`

`/`字符储存时的八个位为00101111. 用十六进制表示则为2F. 所以必须使用`%2F` 来表示`/`字符，所以若发送的请求参数值是：
```
http://openhome.cc. 则必须使用以下格式：
http://openhome.cc/addBookmar.do?url=http%3A%2F%2Fopenhome.cc
```
这是URI 规范中的百分比编码(Perce卧Encoding)，也就是俗称的URI 编码或URL 编码。如果想知道某个字符的URL 编码是什么，在Java 中可以使用
```
java.net.URLEncoder 类的静态encode()方法来做这个编码的动作(相对地，要译码则使用java.net.URLDecoder的静态decode())。

例如:
String text = URLEncoder.encode("http://openhome.cc ", "IS0-8859-1");
```
在URI 之前， HTTP 在GET 、POST 时也对保留字作了规范，这与URI 规范的保留字有所差别。其中一个差别就是在URL规范中，空格符的编码为`%20` ，而在HTTP
规范中空白的编码为`+`。`java.net.URLEncoder` 类的静态方法`encode()`产生的字符串，空格符的编码就为`+`

## 2.2 中文字符
URL 编码，针对的是字符UTF-8 编码的八个位数值，如果请求参数都是Ascii 字符，那没什么问题，因为UTF-8 编码与在ASCII 字符的编码部分是兼容的，
也就是使用一个字节，编码方式就如先前所述。

但在非ASCII 字符方面，如中文，在UTF-8 编码下，会使用三个字节来表示。

例如，"林"这个字在UTF-8 编码下的三个字节，对应至十六进制数值表示就是E6 9E 97。所以在URI 规范下，请求参数中要包括"林"这个中文，表示方式就是
```
http://openhome.cc/addBookmar.do?lastName=%E6%9E%97
```

## 2.2.1 聪明的浏览器
如果直接在现代浏览器地址栏中输入中文参数，是会正常显示的的，但是如果把这个地址复制，粘贴到纯文本文件中，就会看到 URI 编码的结果，
其实现在的浏览器很聪明，会自动将URI 编码显示为中文.无论如何，在URI 规范上若如以上方式发送请求参数，服务器端处理请求参数时，必须使用UTF-8
编码来取得正确的"林'字符。

然而在HTTP 规范下的URL 编码，并不限使用UTF-8，例如在一个BIG5 网页中，若窗体使用GET 发送"林"这个中文字，地址栏中会出现：
```
http://openhorne.cc/addBookmar.do?lastName=%AA%4C
```
这是因为"林"这个中文字的BIG5 编码为两个字节，若以十六进制表示，则分别为AA 、4C . 如果通过窗体发迭，由于网页是BIG5 编码，则浏览器会自动将"林"
编码为"%AA%4C"， 服务器端处理请求参数时，就必须指定BIG5 编码，以取得正确的"林"汉字字符.若使用java.net.URLEncoder 类的静态encode() 方法
来作这个编码的动作；
```
String text = URLEncoder.encode("林"， "BIG5");
```
同理可推，如果网页是UTF-8 编码，而你通过窗体发送，则浏览器会自动将"林"编码为"%E6%9E%97".若使用java.net.URLEncoder 类的静态encode()方法来作
这个编码的动作，则可像下面这样得到"%E6%9E%97 "的结果：
``` 
String text = URLEncoder.encode("林", "UTF- 8");
```
## 2.2.2 发送中文是如何编码的?到服务器端后又是如何译码的? 
这些问题必须先搞清楚. 随便问个"为什么我收到的是乱码? "、"为什么数据库中是乱码?"，往往解决不了问题。如果具备这些基础，
之后说明如何接收包括中文字符的请求参数时，你才能理解，如何使用某些API 进行正确的编码转换动作.